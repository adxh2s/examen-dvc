schema: '2.0'
stages:
  split:
    cmd: python src/data/split.py
    deps:
    - path: data/raw_data/raw.csv
      hash: md5
      md5: 617b56af2992376d5c3e91ad80823898
      size: 333757
    - path: params.yaml
      hash: md5
      md5: 929ed0b36c2967c6a3b186e7ac2e36cf
      size: 637
    - path: src/data/split.py
      hash: md5
      md5: 92ccb4da7f14f1b51bb1278077da3e20
      size: 1200
    params:
      params.yaml:
        split:
          test_size: 0.2
          random_state: 42
          stratify: false
    outs:
    - path: data/processed_data/X_test.csv
      hash: md5
      md5: b2af62a7e108b077aec89fa2622996db
      size: 52624
    - path: data/processed_data/X_train.csv
      hash: md5
      md5: 535251fa6c1a1d098cc7a36e0bd62f38
      size: 209468
    - path: data/processed_data/y_test.csv
      hash: md5
      md5: a051d29629c8bbb4cfb7e85c7f0315da
      size: 6456
    - path: data/processed_data/y_train.csv
      hash: md5
      md5: a9cd9d91da89f732843d72548f64ded3
      size: 25951
  normalize:
    cmd: python src/data/normalize.py
    deps:
    - path: data/processed_data/X_test.csv
      hash: md5
      md5: b2af62a7e108b077aec89fa2622996db
      size: 52624
    - path: data/processed_data/X_train.csv
      hash: md5
      md5: 535251fa6c1a1d098cc7a36e0bd62f38
      size: 209468
    - path: params.yaml
      hash: md5
      md5: 929ed0b36c2967c6a3b186e7ac2e36cf
      size: 637
    - path: src/data/normalize.py
      hash: md5
      md5: 362da50df1fbf5a7b55d09c5e3299739
      size: 1225
    params:
      params.yaml:
        preprocessing:
          numerical:
            strategy: standard
    outs:
    - path: data/processed_data/X_test_scaled.csv
      hash: md5
      md5: 5e079189af6bd091d651a89fafb1c290
      size: 57026
    - path: data/processed_data/X_train_scaled.csv
      hash: md5
      md5: c1b80eb7f083888b625dd0369cf381f8
      size: 227497
  grid_search:
    cmd: python src/models/grid_search.py
    deps:
    - path: data/processed_data/X_train_scaled.csv
      hash: md5
      md5: c1b80eb7f083888b625dd0369cf381f8
      size: 227497
    - path: data/processed_data/y_train.csv
      hash: md5
      md5: a9cd9d91da89f732843d72548f64ded3
      size: 25951
    - path: params.yaml
      hash: md5
      md5: 929ed0b36c2967c6a3b186e7ac2e36cf
      size: 637
    - path: src/models/grid_search.py
      hash: md5
      md5: d4a2ae27b05da6109e1b76f955e65f56
      size: 1345
    params:
      params.yaml:
        grid_search:
          cv: 3
          scoring: neg_mean_squared_error
          n_jobs: -1
          verbose: 1
        models:
        - name: RandomForest
          params:
            n_estimators:
            - 50
            - 100
            max_depth:
            - 10
            - 20
            - 
            min_samples_split:
            - 2
            - 5
        - name: GradientBoosting
          params:
            n_estimators:
            - 50
            - 100
            learning_rate:
            - 0.05
            - 0.1
            max_depth:
            - 3
            - 5
    outs:
    - path: models/best_params.pkl
      hash: md5
      md5: 5e6869dde2919e55bf9c58258c614baf
      size: 114
  training:
    cmd: python src/models/training.py
    deps:
    - path: data/processed_data/X_train_scaled.csv
      hash: md5
      md5: c1b80eb7f083888b625dd0369cf381f8
      size: 227497
    - path: data/processed_data/y_train.csv
      hash: md5
      md5: a9cd9d91da89f732843d72548f64ded3
      size: 25951
    - path: models/best_params.pkl
      hash: md5
      md5: 5e6869dde2919e55bf9c58258c614baf
      size: 114
    - path: src/models/training.py
      hash: md5
      md5: 54f4b0f5aeeb7d64f4e81cb944d98a94
      size: 958
    outs:
    - path: models/model.pkl
      hash: md5
      md5: 2f4f15f8774918401107d533ca662864
      size: 2709809
  evaluate:
    cmd: python src/models/evaluate.py
    deps:
    - path: data/processed_data/X_test_scaled.csv
      hash: md5
      md5: 5e079189af6bd091d651a89fafb1c290
      size: 57026
    - path: data/processed_data/y_test.csv
      hash: md5
      md5: a051d29629c8bbb4cfb7e85c7f0315da
      size: 6456
    - path: models/model.pkl
      hash: md5
      md5: 2f4f15f8774918401107d533ca662864
      size: 2709809
    - path: params.yaml
      hash: md5
      md5: 929ed0b36c2967c6a3b186e7ac2e36cf
      size: 637
    - path: src/models/evaluate.py
      hash: md5
      md5: c6b7694454f91e9354f767ef49301cbe
      size: 1549
    outs:
    - path: data/predictions.csv
      hash: md5
      md5: 9aeab4427553656032c71ce6e9e27942
      size: 69508
    - path: metrics/scores.json
      hash: md5
      md5: a6a2f9dbe1346eba6fc5c157ed45e509
      size: 157
